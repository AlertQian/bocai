<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>菠菜用户登录</title>
	<meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,user-scalable=yes, minimum-scale=0.4, initial-scale=0.8,target-densitydpi=low-dpi" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />

    <script type="text/javascript" src="__PUBLIC__/Home/static/js/jquery-3.2.1.min.js"></script>
    <script src="__PUBLIC__/Home/static/js/layer.js" charset="utf-8"></script>
    <style type="text/css">
    body{
      text-align:center;
      font-size:18px;
    }
      .logincontainer{

      }
      .logincontainer .linebox{
        margin-top:2vh;
      }
      .logincontainer input{
        border:1px solid black;
        height:4vh;
      }
      .loigncontainer span{

      }
      button.verify{

      }
      input.verify{
        width:25vw;
        height:10vh;
      }
    </style>
</head>
<body>
    <div class="logincontainer">
        <div class="linebox">用户登录</div>
        <form>
          <div class="linebox"><input type="text"  name="username" placeholder="用户名"></div>
          <div class="linebox"><input type="text" name="password" placeholder="密码"></div>
          <div class="linebox"><input type="button" value="登录"></div>
          <div class="linebox"><span>没有账号？：：</span><a href="{:url('Home/Login/register')}">注册</a></div>
        </form>
    </div>
    <script type="text/javascript" src="__PUBLIC__/Home/static/js/yz.js"></script>
    <script>
          $("input[type='button']").on('click',function(){
            var url = "{:url('Login/login')}";
            var username = $("input[name ='username']").val();
            var password = $("input[name ='password']").val();
            if(!username){
              layer.msg("账号不能为空");
              return false;
            }
            if(!password){
              layer.msg("密码不能为空");
              return false;
            }
            $.ajax({
              type : "GET",
              url : url,
              data:{"username":username,"password":password},
              // text数据 0 登录成功 或者 1 登录失败
              dataType:"text",
              success:function(data){
                console.log(i);
                  if(data==1){
                    // layer.msg('jdfjjdfjd');
                    layer.msg('登录成功',function(){
                    window.location.href="{:url('Home/Index/index')}";
                   })
                    return false;
                  }
                  if(data==2){
                    layer.msg('账号密码错误,请重新登录');
                    return false;
                  }
                  else{
                    layer.msg('请检查是否有dump,echo,或者return等多余返回语句');
                  }
                },
              error:function(data){
                  layer.msg('程序出现未知错误');  
              }
            })
          }) 
</script>

    
    <!-- 底部结束 -->

</body>
</html>